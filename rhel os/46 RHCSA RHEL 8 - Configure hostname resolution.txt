46 RHCSA RHEL 8 - Configure hostname resolution


Hostnames
 > All machines in a network have in addition to an IP address, a hostname. 
 > The hostname is literally a name for the host.


/etc/hostname
 > contains the name of the hostname
 > we can update the system's hostname by	
	1. updating the value of /etc/hostname
	2. execute the "hostnamectl" command or restart the "hostnamectl" service to reflect the changes


Domain Name Service (DNS)
 > DNS or Domain Name Servers are special servers that provide resolution of a FQDN to an IP address. 
 > This allows to have the added benefit of not having to type in the IP address every time you want to connect to a network device.


/etc/resolv.conf
 > contains the current configured DNS servers in the system
 > generated by NetworkManager, not recommended to modify


Changing DNS of the system
 > to change the DNS of the system, we can use two ways
	1. Add/Modify ipv4.dns property (or ipv6.dns if ipv6 is supported) of the active connection that we have (the one where we connect to internet outside vm), then reload the connection using "nmcli connection reload" and restart the NetworkManager service
	2. Modify the /etc/hosts file, and add a new DNS using the format IPADDRESS DNS1 DNS2 DNS3
		- EX: 10.0.2.5 test.local test 


Adding ipv4.dns and updating Network Manager
1. Add ipv4.dns property to an active connection of system
	$ nmcli connection modify eth0 ipv4.dns "8.8.8.8 8.8.4.4"
2. Reload the connection and restart the NetworkManager
	$ nmcli connection reload
	$ systemctl restart NetworkManager
3. Check the /etc/resolv.conf if the DNS is added
	$ cat /etc/resolve.conf
4. Check if the DNS added is reusable
	$ nslookup www.google.com 8.8.8.8
		- change the 8.8.8.8 to the DNS you added


Modifying /etc/hosts contents
1. Open /etc/hosts file
	$ vi /etc/hosts
2. Add the DNS alongside the ip address (preferred to use the ipv4 of the active connection that system have)
	10.0.2.5 	RHEL8.local RHEL8
3. Check if the DNS is available
	$ ping RHEL8.local
	$ ping RHEL8
		- they should ping to the ip address provided in /etc/hosts




Commands
hostname [OPTIONS]
 > show or set the system's host name
 > options
	-s	show the current hostname is short format
	-h	show the fully qualified domain name (FQDN)
 > ex:
	$ hostname -s
	$ hostname -h


hostnamectl
 > control the system hostname
 > synopsis:
	$ hostnamectl [OPTIONS...] {COMMAND}
 > EX:
	$ hostnamectl
		- reloads the configuration and restarts the service


nmcli connection reload
 > reloads the configuration and applies the updates