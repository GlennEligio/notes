144 CloudFront Overview

AWS CloudFront
 > Content Delivery Network (CDN)
 > Improves read performance, content is cached at the edge
 > Improves users experience
 > 216 Point of Presence globally (Edge locations)
 > DDoS protection (because worldwide), integration with Shield, AWS Web Application Firewall
 > For more info, visit:
	https://aws.amazon.com/cloudfront/features/

EX:
In this example, instead of User directly sending request to S3 Bucket across the globe, it will send it to the nearest Edge Location of CloudFront. CloudFront then sends the request to the S3 Bucket. The content served will then be cached at the edge

User (US) <-----> Edge Location (CloudFront) <----> S3 Bucket (AU)


CloudFront - Origins
Origin
 > refers to the original destination of request

S3 bucket as Origin
 > for distributing files and caching them at the edge
 > Enhanced security with CloudFront Origin Access Identity (OAI)
 > CloudFront can be used as an ingress (to upload files to S3)

Custom Origin (HTTP)
 > Application Load Balancer
 > EC2 Instance
 > S3 website (must first enable the bucket as a static S3 website)
 > Any HTTP backend you want (ex: On Premises webapp)



CloudFront at a high level - Diagram
	HTTP Request
	GET /beach.jpg?size=300x300 HTTP
Client ---------|
		|
		|		Forward Request
		V		to your Origin
	CloudFront Edge Location <-------------> Origin (S3 or HTTP)
		^
		|
		v
		Local Cache



CloudFront - S3 as an Origin
		|------	AWS Cloud -----------------------------------|
Public www ---> Edge 		---|
		(Los Angeles)	   |
				   |
Public www ---> Edge		---|--- Origin	<-------> Origin Access Identity
		(Sao Paolo)	   |   	(S3 bucket)	+ S3 bucket policy
				   |
Public www ---> Edge		---|
		(Mumbai)




CloudFront vs S3 Cross Region Replication
CloudFront:
 > Global Edge network
 > Files are cached for a TTL (maybe a day)
	- TTL = time to live
 > Great for static content that must be availble everywhere

S3 Cross Region Replication
 > Must be setup for each region you want relpication to happen
 > Files are updated in near real-time
 > Read only
 > Great for dynamic content that needs to be available at low-latency in few regions


NOTES:
1. Communication between Edge Location and CloudFront Origin is done in the private AWS Network