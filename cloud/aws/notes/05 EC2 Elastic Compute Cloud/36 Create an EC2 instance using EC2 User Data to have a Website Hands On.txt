36 Create an EC2 instance using EC2 User Data to have a Website Hands On



Hands-On: Launching an EC2 instance running Linux
 > We'll be launching our first virtual server using the AWS Console
 > We'll get a first high-level approach to the various parameters
 > We'll see that out web server is launched using EC2 user data
 > We'll learn how to start/stop/terminate our instance



Launching an EC2 instance
NOTE: Make sure you are using free tier eligible configuration
1. Go to AWS Dashboard
2. Search for EC2 to go to EC2 dashboard
3. Go to Instances > Instances
4. Click "Launch Instances"
5. Provide the following information in the EC2
6. For name, choose whatever name you want
7. For OS, choose Amazon Linux
8. For Instance type, choose t2.micro
9. For Key pair (login), Create a new key pair
	> Key pair type to RSA
	> Private key file format to .pem (for Windows 10+, Linux, Mac) or .ppk (Window 8 or lower)
10. For Network settings, allow SSH from Anywhere (0.0.0.0/0), and HTTP traffic from Internet
	> this will automatically create a Security group based on the config we set in this section. The EC2 instance will be included in that Security group
11. For Configure storage, set to 8gb for now. But we can use 30gb for free tier
	> by default, when we terminated the EC2 instance, the data in this storage will be LOST
	> we can configure this so that it will not be deleted
12. Open the Advanced Details, and inside, look for the User Data section and paste the script below:

#!/bin/bash
# Use this for your user data (script from top to bottom)
# install httpd (Linux 2 version)
yum update -y
yum install -y httpd
systemctl start httpd
systemctl enable httpd
echo "<h1>Hello World from $(hostname -f)</h1>" > /var/www/html/index.html

13. Launch the instance



Testing the Instance
1. When the EC2 instance is running, click the Instance in the Instances dashboard
2. You should be able to see all the details with regards to EC2. For now, save the Public IPv4 address assigned to it
3. Paste the ip address in the browser. You should see "Hello World from" plus the hostname of the EC2 instance
	> take note that you should access the ip address via HTTP and not HTTPS, since we only configured the EC2 instance inbound rule to only include SSH and HTTP



Stopping the Instance
1. In the Instance dashboard, click the Instance
2. Click the "Instance state" dropdown
3. Select Stop instance, and when prompted, click yes



NOTE:
1. With free tier, we have 750hours of t2.micro and 30gb of EBS storage PER MONTH
2. Public IP address of the EC2 instance changes everytime we stop and start it
3. Private IP address refers to the EC2 instance address within AWS network
4. Stopping the EC2 instance will prevent it from incurring additional charge to us