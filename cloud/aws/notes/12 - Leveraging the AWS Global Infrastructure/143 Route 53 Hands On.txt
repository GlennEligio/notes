142 Route 53 Hands On


Creating the EC2 instances
1. Create TWO EC2 Instance in different Region
	> uses Amazon Linux AMI	
	> opens ports for SSH and HTTP
	> with User Data, we will install Apache WebService and modify the default index.html
		- we will display the Region of the EC2 instance in the index.html page
		- below, change the 'Ireland' in the User Data script
	> after creating an EC2 instance, take note of the following
		- REGION, PUBLIC IP ADDRESS
	> EX:
		54.45.54.87 	Ireland
		78.65.32.21	California
EX:
#!/bin/bash
# Use this for your user data (script from top to bottom)
# install httpd (Linux 2 version)
yum update -y
yum install -y httpd
systemctl start httpd
systemctl enable httpd
echo "<h1>Hello World from Ireland</h1>" > /var/www/html/index.html



Checking if the TWO EC2 Instances work
1. Visit the EC2 Instances using the public ip addresses
	> it should display different location in the page


Buying Route 53 domain
1. Search Route 53 Service
2. Go to Route 53 dashboard
3. Go to Registered Domain section
4. Register a Domain
	> pass the domain name that you want to register
	> check if its available
	> add it to the cart
	> order the domain 


Creating a Record Set in the Route 53 Domain
1. Go to the Domain that you bought
2. Go to Hosted Zones section
	> initially, there would be two Record Sets present
3. Create TWO new Record Set (each for the EC2 instances)
	> for name, pass "www"
		- www.exampledomain.com
	> for type, use A - IPv4 address
	> for Alias, its a No	
	> for Value, its the Public IP address of the EC2
	> for Routing Policy, choose Latency
	> for Region, select the Region where the EC2 instance is located
	> for Set ID, pass anything, it must be unique within the group of latency set
		- My Region EC2 Instance



Testing the Route 53 and the Routing Policy
1. Connect to a VPN that is closest to EC2 Instance #1
2. Visit the domain name
	> you should be redirected to the website hosted by EC2 #1
3. Connect to a VPN that is closest to EC2 Instance #2
4. Visit the domain name again
	> you should be redirected to the website hosted by EC2 #2



Cleanup
1. Delete the EC2 Instances created for different regions
2. Unregister the Domain name in Route 53



NOTE:
1. Route 53 is not a free service
	> $12 a year for the domain
	> $0.50 per month for the hosted zone